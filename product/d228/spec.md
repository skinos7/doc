


## 简介

###### D228为一款接口丰富, 工业用LTE/NR路由模块, 此路由模块含有
 - **3G/4G/5G全网通频段接入**, **双千兆以太网口**, **三串口**(*RS485/RS232/TTL*)
 - **双天线5.8G无线**(*800M*), 
 - **2/4路输入输出IO口**(*IO口可选配置为I2C*)
 - **支持PIN针母座**, 通过PIN母座可向外转接5个网口(*2个带变压器,3个未带变压器*)、三个串口、SIM卡槽、PCIE接口、USB2.0接口、TF卡接口、复位按键、指示灯及9个IO口接口
 - **可选装eSIM**, 代替插SIM卡, 增加稳定性
 - **可选装Nand Flash**, 通过Nand Flash实现大容量存储, 可定制用于支持Golang等高级语言的开发环境
 - **GPS及北斗定位功能**
 - **短信功能**, 支持中文短信及短信管理设备
 - **PPTP, L2TP, IPSEC, GRE, OPEN威批恩等常用VPN功能**
 - **ZeroTier/WireGuard等SDWAN的功能**
 - **支持常用的摄象头视频流字符叠加**, 可将网络信号，GPS信息，串口传感器，I2C传感器采集的数据叠加到摄象头视频流中

###### 为支持工业级应用环境带有
 - **宽温支持**, 支持低温-40度冷启动, 高温75度长期工作
 - **硬件狗**
 - **防静电保护**
 - **多路独立电源设计**, 独立功能模块间相互监控, 出现异常可快速恢复

###### 多种方式接入互联网
 - **3G/4G/5G接入互联网**
 - **3G/4G/5G透传模式(Modem)支持**
 - **有线WAN口接入互联网**
 - **5.8G无线接入互联网**,  **5.8G无线中继桥接**
 - **混合(多WAN)上网---3G/4G/5G与有线WAN口接入同时工作**, 冷备份, 热备份及负载均衡带宽叠加
 - **混合(多WAN)上网---3G/4G/5G与5.8G无线接入同时工作**, 冷备份, 热备份及负载均衡带宽叠加, 实现在无人机或车载上进站连本地无线网络出站使用LTE上网的功能
 - **混合(多WAN)上网---5.8G无线接入与有线WAN口接入同时工作**, 冷备份, 热备份及负载均衡带宽叠加
 - **混合(多WAN)上网---强制客户端(或应用)使用指定接入方式上网**, 允许在多种接入方式同时工作时强制客户端或应用分别使用不同的接入方式访问互联网
 - **定制更多智能接入方式**, 开放SDK编程环境提供示例及标准接口可客户自定制更多接入策略， 如定制三种接入方式同时工作， 自动根据现场情况或指定策略动态变换接入方式等

###### 提供多种接口供其它设备连接到互联网
 - **以太网口(802.3u/802.3z)**
 - **2.4G无线(802.11a/802.11an/802.11ac)**
 - **串口(RS485/RS232/TTL)**
 - **IO口(3.3V输入输出)或I2C接口**

###### 串口支持多种模式： 透传/Modbus/MQTT/指令模式/外接GPS北斗定位模块/HTTP POST/自定义协议转换
 - **串口透传** 支持自定义注册包/激活包/保活包, 自定义包前后缀, 服务器与客户端同时工作及多服务器, 流量统计
 - **Modbus TCP/MQTT协议**, 可为PLC设备及实时物联网设备接入网络
 - **HTTP POST协议**, 可将串口数据通过HTTP POST传送到指定的服务器
 - **串口GPS数据上报**, 串口支持外接GPS, 可解析其数据并上报
 - **支持串口指令模式**, 可通过串口指令管理控制设备
 - **三路串口同时工作**, 三路串口分别为RS485, RS232, TTL
 - **定制各种串口协议**, 开放SDK编程环境提供示例及标准接口可客户自定制更多串口协议

###### IO口支持实时控制及监控
 - **2路IO口实时切换输入输出模式**, 通过底座可以转接出9个IO口
 - **提供自定义远程管理IO口协议**, 允许远程服务器实时操作设备的IO口, 配置IO口模式, 输入模式下IO口电平发生变化时实时通知远程服务器
 - **提供MQTT协议管理IO口**, 自动订阅主题及IO变化时发布主题等功能实现远程操作及监控设备IO口电平变化
 - IO口可配置为**I2C引脚实现外接I2C设备**, 如外接I2C显示屏,电池电量计等功能
 - **定制各种IO控制协议**, 开放SDK编程环境提供示例及标准接口可客户自定制更多IO管理口协议

###### GPS多种类数据采集上报
 - **GPS或北斗**
 - **NMEA原始数据上报**, 可指定报头及指定上报间隔
 - **MQTT数据上报**
 - **HTTP JSON数据上报**

###### 多种管理协议支持, 允许用户通过协议实现本地或远程全方位管理控制路由模块
 - **本地TCP协议控制**
 - **本地HTTP协议状态查询**
 - **本地网络广播搜寻设备**
 - **本地管理工具包及编程API**, 提供Linux环境下的管理工具包, 实现在本地管理设备/OTA升级, 并开放管理工具包编程API及示例, 快速帮助客户实现对设备的管理
 - **短信管理**, 支持通过短信重启重置设备， 查询设备状态，修改设备配置等
 - **远程HTTP协议状态上报**(设备信息/终端信息/GPS信息), **远程HTTP协议控制**, **MQTT状态上报告警及MQTT设备管理等功能**
 - **远程管理云服务器SDK**, 提供Linux环境下的云管理服务器, 实现远程管理设备/OTA升级, 并开放管理工具包编程API及示例, 快速帮助客户实现对设备的远程管理


###### 为支持多功能应用及定制化开发使用了专为路由行业开发的Skin嵌入式系统
 - **7*24小时全年无故障运行**, 功能强大, 性能卓越, **功能模块组件式分离开发**, 统计的作业接口, 方便客户编写自已的应用程序
 - **框架式开发**, 支持自行定制指定功能的协议组件, 如可只编写LTE模块驱动识别组件, 编写串口协议转换组件及编写远程被管理组件对端客户的管理平台等
 - **纯C语言编写**, 行业内应用功能齐全, 并可**在线编程**
 - **完备的开发环境及开发文档免费下载**, 一步到位允许用户基于现有功能上进一步开发定制化的功能, 并将现有功能包装为统一的接口允许客户直接调用
 - **可跟据客户需求开发**, 也可提供一对一提供开发指导

###### 含有两项专利
 - 本产品申请 **发明专利**, 并已获得 **实用新型专利**，请使用正品，**排除法律风险**



## 模块实物图

![avatar](./m_20.jpg) ![avatar](./m_21.jpg) ![avatar](./m_22.jpg) ![avatar](./m_23.jpg)



## 硬件规格
|  参数   | 规格  |
| :-----:| :---- |
| **尺寸(mm)** | 61.72mm X 72.01mm X 15mm |
| **4G/5G参数(LTE/NR)**  | 默认使用**RM500U-CN四天线全网通模块**, 也可搭配客户指定的其它模块<br>**5G频段**: NR NSA: n41/n78/n79 + NR SA: n1/n28*/n41/n77/n78/n79<br>**4G频段**: FDD LTE: B1/B2/B3/B5/B7/B8/B20/B28 + TDD LTE: B34/B38/B39/B40/B41<br>**3G频段**: WCDMA: B1/B2/B5/B8<br>**MIMO**:<br>DL4X4: n1/n41/n78/n79<br>DL2X2: n28<br>UL2X2: n41/n77/n78/n79<br>LTE DL: 2X2<br>**带宽**: <br>SA Sub-6: DL 2Gbps; UL 1Gbps <br>5G NSA Sub-6: DL 2.2Gpbs; UL 575Mbps<br>LTE: DL 600Mbps; UL 150Mbps<br>UMTS DL 42.2Mbps; UL 11Mbps <br> |
| **5.8G参数(WIFI)**   | **标准**：IEEE802.11a/an/ac 866Mbps(2T2R)<br>**发射功率**: <br>5G HT20 MCS7 15dBm<br>5G HT40 MCS7 15dBm<br> 5G AC40-MCS9 13dBm<br>5G AC80-MCS9 13dBm<br>**接收灵敏度**:<br>5G HT20 MCS7 -65dBm<br>5G HT40 MCS7 -62dBm<br>5G AC40-MCS9 -54dBm<br>5G AC80-MCS9 -51dBm|
| **WAN口** | 8PIN(1.25mm间距)WAN接口(100/1000Mbps自适应), *网关模式及混合模式为**WAN口**, 其它模式下为**LAN口***  |
| **LAN口** | 8PIN(1.25mm间距)LAN接口(100/1000Mbps自适应)  |
| **串口1** | 8PIN(1.25mm间距)串口接口, **TTL电平**, 可选配置为**IO接口**  |
| **串口2** | 8PIN(1.25mm间距)串口接口, **RS232串口**  |
| **串口3** | 8PIN(1.25mm间距)串口接口, **RS485串口**  |
| **IO口(2个)** | 8PIN(1.25mm间距)式IO接口, 默认为2路IO口, 可选配置为**I2C接口**  |
| **电源供电口(2个)** | **立式**及**卧式**的4PIN(1.25mm间距)式供电接口(7-15V/3-5A)各一个，建议使用12V2A给其中之一供电即可  |
| **定位孔** | 4个定位孔  |
| **WIFI天线接口(2个)** | 2个IPEX-1天线接口(5.8G)  |
| **4G/5G天线接口(4个)** | 4个IPEX-4接口(4G/5G) |
| **SIM卡槽** | Micro SIM卡槽， **缺口向外触面向PCB板插入, 不支持热插拨** |
| **接键(1个)** | 复位按键 |
| **指示灯(3个)** | **系统灯(蓝)**:刚上电时常亮，启动后但未连接慢闪，正在拨号时快闪， 连接网络成功后常亮<br>**信号灯(红)**: 4G信号弱时亮<br>**信号灯(绿)**: 4G信号强时亮 |
| **PIN针母座(40PIN+100PIN)** | **双排（1.0mm间距）40PIN及100PIN母座, 可向外提供以下接口转接**<br>2个带变压器网口<br>3个无变压器网口<br>三个串口<br>4路供电口<br>SIM卡接线<br>按键及指示灯<br>IO接口<br>PCIE接口<br>USB2.0接口<br>TF卡接口<br>9个IO口接线  |
| **功耗（满负荷时）** | 小于5W, 基于无线环境与网络负载不同瞬间峰值可能会高于5W， 建议提供5W功率 |
| **温度** | 工作温度： -40℃ ~ +60℃ |



## 硬件配置表
|  接口                          | D228标准版  | D228-4G  | D228-GPS  | D228核心版  | D228-4G核心版  | D228-NAND  |
|:-----:|:----:|:----:|:----:|:----:|:----:|:----:|
| 4G/5G(LTE/NR)全网通基带          | V         |          |           |            |                |     V      |
| 4G(LTE)全网通基带                |           |    V     |      V    |            |                |            |
| 带M2.座子-自配5G(NR)模块         |           |          |           |     V      |                |            |
| 带MiniPCI-E插槽-自配4G(LTE)模块  |           |          |           |            |       V        |            |
| GPS定位                         |           |          |     V     |            |                |            |
| NAND Flash                    |           |          |           |            |                |     V      |

***如需更多其它配置请联系销售***



## 软件功能表
|  功能   | 描述  |
| :-----:| :---- |
| **联网方式** | **单连接上网**： 3G/4G/5G上网，有线上网，无线上网，桥接，中继，无线互联网, 3G/4G/5G透传(Modem)模式<br>**混合(多WAN)上网**：<br>3G/4G/5G与以太网有线上网同时工作, 备份及负载均衡带宽叠加<br>3G/4G/5G与无线WIFI上网同时工作, 备份及负载均衡带宽叠加<br>无线WIFI上网与以太网有线上网同时工作, 备份及负载均衡带宽叠加<br>**组合上网模式**: 3G/4G/5G上网+桥接， 3G/4G/5G上网+有线接内网, 3G/4G/5G上网+无线接内网, 其它复杂定制组合 |
| **LTE网络**| 3G/4G支持 **多种拨号模式** (如点对点, 网卡拨号等), *可选支持IPV6协议栈*<br>3G/4G/5G支持1000多个运营商， **自动匹配运营商**<br>**APN支持自定义**<br>支持SIM卡 **PIN码**<br>**短信管理(SMS)**<br>**锁网络制式**<br>**锁频段**<br>**锁小区**<br>**锁SIM卡**<br>**锁3G/4G模块**<br>自定义查询/设置AT指令 |
| **网络稳定性**| 多种网络保活机制, **ICMP检测**, **接收包计数检测**<br>连续失败恢复等功能, *并可配置相关细节及阀值*，确保数据终端永久在线 |
| **串口功能**| 串口支持 **透传** 模式, 支持指定帧长度帧间隔、流控、自定义注册包/保活包、自定义包前后缀、向串口发送自定义激活包、**多服务器与客户端同时工作**、**多协议同时工作**、**流量统计**<br>串口透传支持 **多数据中心** 功能<br>串口支持 **ModbusRTU** 协议(*将串口上的ModbusRTU转换成ModbusTCP*)<br>串口支持 **MQTT数据透传** (*并支持向串口发送自定义激活包*)<br>串口支持 **指令模式**, *支持专有HE指令用于控制及管理设备*<br>串口支持 **外置GPS及北斗模块** ，并可将GPS数据解析并上传或摄象头视频流字符叠加<br>串口支持**外接温感烟感**等多种传感器, 并可将数据解析并上传或摄象头视频流字符叠加 |
| **设备稳定性**| 工业级硬件看门狗<br>3路独立供电单元相互监控<br>低温自热机制<br>自动重启(*定时或定点及空闲时重启*) |
| **高可用性**| 多设备间相互备用, *高可用性HA(VRRP), 单台设备故障可切换到备用设备* |
| **虚拟专用网**| 支持L2TP客户端(*支持隧道密码*)<br>PPTP客户端(*支持MPPE*)<br>GRE隧道<br>Open威批恩客户端(*支持预共享密钥,证书*)<br>IPSEC |
| **GPS定位**| 支持 **NMEA协议TCP/UDP上报**(*可指定包头及上报间隔*)<br>支持 **TCP/UDP NMEA服务器** 功能(*允许其它客户端主动连接设备获到定位信息, 允许指定客户端数*)<br>支持 **MQTT协议**上报定位信息<br>支持 **HTTP JSON协议**上报定位信息<br>支持 **JT/T808协议**上传定位信息 |
| **网络应用**| 防火墙<br>端口映射(NAT)及DMZ主机<br>端口代理<br>域名劫持<br>应用层网关<br>静态路由表管理<br>**源地址路由**, **端口路由**等高级路由功能<br>DDNS(支持花生壳及多种国内外运营商)<br>UPNP<br>域名重定向<br>IGMP正向/反向代理<br>动态路由协议（RIPv1、RIPv2、RIPng、OSPFv2、OSPFv3）<br>SNMP(可自定义OID) |
| **网络监控**| 网络实时流量图， 终端实时流量及用量统计, 终端流量控制、访问控制、定时上网<br>终端远程唤醒(WOL) |
| **无线(WIFI)功能**| 5.8G无线热点<br>5.8G无线网卡<br>无线黑白名单<br>发射功率调整<br>Portal功能：*WIFIdog广告推送(需定制)*，*Coova Chilli广告推送(需定制)* |
| **时间管理**| 基站对时<br>NTP对时<br>支持 **局域网对其它设备授时**, *给某些专网用无RTC摄象头等设备提供正确的时间* |
| **开发接口**| 局域网搜索协议(发现设备), 局域网TCP/HTTP控制协议(控制设备)<br>局域网批量升级协议(批量升级设备固件)<br>远程HTTP控制协议(云平台管理)<br>设备信息(3G/4G信号连接时长流量/设备基本信息等各种设备状态), GPS信息, 终端信息(终端MAC地址/连接时间及时长)等上报协议<br>网页接口获取设备信息API<br>IO口远程控制协议<br>远程MQTT监控协议(告警云平台)<br>终端命令行(SSH/Telnet/串口)接口<br>在线开发脚本项目(开发shell脚本并注册为开机或关机或事件触发运行,并可在线开发管理界面), 在线将脚本项目打包用于安装于其它设备中<br>在线开发定时运行指定的脚本<br>短信(SMS)控制协议|
| **第三方开发支持**| SkinOS系统属于开放式Linux操作系统, 针对项目用户可提供完整的开发环境, 支持客户自已开发应用软件<br>系统为纯C语言开发的路由器操作系统, 可运行于嵌入式芯片平台及X86工控机中, 性能高, 功耗低, 发热量小<br>提供组件式开发环境, 可基于系统现有的组件方便的开发客户应用软件包(FPK软件包)并可跨嵌入式平台应用<br>组件式开发环境提供统一的API及丰富的组件接口供客户调用<br>堆叠式的组件应用开发可快速开发客户定制项目, 并生成软件包, 客户定制项目可无修改跨平台移植到所有支持Skin系统的产品中|
| **远程管理**<br>*针对定制项目*| 批量查看设备状态及管理<br>批量重启及复位设备， 批量升级设备<br>设备分组管理, 设备单独管理<br>设备下的终端管理<br>*4G流量统计及配额管理(开发中)*<br>*告警信息记录及邮件通知(开发中)*<br>*设备运行日志管理(开发中)*|
| **设备管理**| 备份及导入配置，本地升级, 在线升级, 局域网批量升级<br>LOGO上传，WEB管理界面定制上传，定制默认配置，*恢复出厂也可保留*<br>英文切换, *恢复出厂也可保留*<br>可安装卸载FPK软件包, 可恢复原始固件状态<br>云平台远程管理<br>Telnet/SSH连入设备<br>串口命令行管`理（CLI）<br>指示灯开关， IO口常用功能定义<br>本地及远程日志<br>**IO扩展（支持自定义输入及输出）用于工业控制, 通过自定义协议或MQTT协议远程实时控制**<br>**升级失败可恢复**（不死Bootloader）<br>可定制普通用户及超级用户界面区分管理, **锁定指定配置**, **锁定升级**, **锁定重启**, **锁定恢复出厂及锁定配置导入导出**等功能<br>**提供x86/aarch64(arm)平台的设备管理工具包及OTA升级工具**<br>支持专有工具实现 **批量升级**, **批量测试** |
| **后续功能**| USSD(开发中)、TR069(开发中) |
| **最大用户数**| 无线：40个， 有线：100个 |



## 模块正面接口图 

|  **带LTE/NR(4G/5G)模块**   |  **未插LTE/NR(4G/5G)模块** |
| :-----:| :----: |
| ![avatar](./正面接口图-带LTE模块.png)  | ![avatar](./正面接口图-未插LTE模块.png)  | 

###### SYS: **蓝色系统指示灯**
- 刚上电时常亮
    > 上电后不亮表示通电不正常或设备可能损坏
- 启动后自检时慢闪
    > 自检失败将一直保持慢闪
    > 慢闪时一直保持亮与灭时长相同表示未识别到LTE模块
    > 慢闪时一直保持灭比亮时长表示未识别到SIM卡
- 正在拨号时快闪
    > 设备升级时也会快闪
- 连接网络成功后常亮

###### Weak: **红色信号强度指示灯, LTE/NR信号弱时亮**
- LTE/NR信号弱时长亮
- LTE/NR信号非常弱时闪

###### Strong： **绿色信号强度指示灯, LTE/NR信号强时亮**
- LTE/NR信号非常强时长亮
- LTE/NR信号良好是闪

###### WAN Link： **WAN口指示灯**
- WAN口有设备接入亮, WAN口不无设备接入时灭
- WAN口设备传数据时闪

###### LAN Link： **LAN口指示灯**
- LAN口有设备接入亮, LAN口不无设备接入时灭
- LAN口设备传数据时闪

###### RESET: **恢复出厂按键**
- 上电开机后按下5至8秒钟松开设备将恢复出厂并重启

###### SIM Card: **SIM卡插槽, 可插入Micro SIM卡**
- SIM卡缺口向外接触面向PCB板插入

###### WIFI-1: **5.8G的WIFI天线接口**
- 用于接IPEX-1头的5.8G 11AC WIFI天线

###### WIFI-2: **5.8G的WIFI天线接口**
- 用于接IPEX-1头的5.8G 11AC WIFI天线

###### UART口: **8PIN座子(1.25mm), 由三个串口及3.3V供电, GND组成**
- 串口(TTL), 为TTL电平的串口接口
    > TTL-TX为发送
    > TTL-RX为接收
    > 3.3V及GND可分别用于对外供电及接地
- 串口(RS232), 为RS232电平的串口接口
    > RS232-TX为发送
    > RS232-RX为接收
    > 3.3V及GND可分别用于对外供电及接地
- 串口(RS485), 为485接口为串口
    > RS485-B为485串口的B
    > RS485-A为485串口的A

###### LAN口: **8PIN座子(1.25mm), 由TX_D1+, TX_D1-, RX_D2+, BI_D3+, BI_D3-, RX_D2-, BI_D4+, BI_D4-等8根线组成的千兆以太网口**
- 用于连接其它有线设备, 为其提供上网服务
    > TX_D1+ 与 网线序号1 相连
    > TX_D1- 与 网线序号2 相连
    > RX_D2+ 与 网线序号3 相连
    > BI_D3+ 与 网线序号4 相连
    > BI_D3- 与 网线序号5 相连
    > RX_D2- 与 网线序号6 相连
    > BI_D4+ 与 网线序号7 相连
    > BI_D4- 与 网线序号8 相连

###### WAN口: **8PIN座子(1.25mm), 由TX_D1+, TX_D1-, RX_D2+, BI_D3+, BI_D3-, RX_D2-, BI_D4+, BI_D4-等8根线组成的千兆以太网口**
- 在默认配置下WAN口即为局域网的LAN口, 用于连接其它有线设备, 为其提供上网服务
- 而将设备的工作模式配置为有线宽带或混合模式时, WAN口即为WAN口, 用于连接其它的路由器设备实现接入互联网
    > TX_D1+ 与 网线序号1 相连
    > TX_D1- 与 网线序号2 相连
    > RX_D2+ 与 网线序号3 相连
    > BI_D3+ 与 网线序号4 相连
    > BI_D3- 与 网线序号5 相连
    > RX_D2- 与 网线序号6 相连
    > BI_D4+ 与 网线序号7 相连
    > BI_D4- 与 网线序号8 相连

###### VCC: **4PIN座子(1.25mm), 卧式电源供电口** ***设备可选两个位置供电口之一*** 
> VCC+为正极, 如使用此接口供电, 需同时使用这两个VCC+
> VCC-为负极, 如使用此接口供电, 需同时使用这两个VCC-

###### LTE/NR-1, LTE/NR-2, LTE/NR-3, LTE/NR-4: **LTE/NR天线接口**
- 为IPEX-4的天线接头, 用于连接对应LTE/NR(4G/5G)天线



## 模块背面接口图

![avatar](./背面接口图.png) 

###### VCC: **4PIN座子(1.25mm), 卧式电源供电口** ***设备可选两个位置供电口之一*** 
> VCC+为正极, 如使用此接口供电, 需同时使用这两个VCC+
> VCC-为负极, 如使用此接口供电, 需同时使用这两个VCC-

###### IO口: **8PIN座子(1.25mm), 由2个IO引脚, 3个LED灯引脚, 一个复位按键引脚及GND/3.3V供电组成**
- RESET Button, 为复位按键引脚
- GND为接地
    > 使用IO口可以从设备的其它任意接口中取GND或3.3V供电
- G1为IO口1, 当配置为I2C时, 此引脚为I2C的SCL, *即串行时钟线*
- G2为IO口2, 当配置为I2C时, 此引脚为I2C的SD, *即串行数据线*
- Strong LED, 即系统的Stong灯的引脚
- Weak LED, 即系统的Weak灯的引脚
- SYS LED, 即系统的SYS灯的引脚
- 3.3V为提供3.3V供电的引脚
    > 使用IO口可以从设备的其它任意接口中取GND或3.3V供电



## 尺寸图(具体以dxf文件为准)

![avatar](./尺寸图.png) 

## WAN, LAN, 串口, IO及电源供电接口规格 --- 卧式座子

![avatar](./8PIN接口规格.png) 

## 电源供电接口规格 --- 立式座子

![avatar](./8PIN接口规格-立.png)  | 



## 升级包下载
[ftp://ftp.wmdevice.com/d228/](ftp://ftp.wmdevice.com/d228/)


## 其它资料

[快速安装说明](./setup.md)

[底座接口说明](./spec_misc.md)



----

